@charset "utf-8";

// 定义动画
@mixin keyframes($name) {
    // 暂存浏览器前缀支持配置
    $original-experimental-support : get-experimental-support-for-all();

    // 如果开启 webkit 前缀支持，则在具有 webkit 前缀的关键帧定义中
    // 输出 webkit 前缀内容和正常内容，取消输出其它内容
    @if get-experimental-support($original-experimental-support, webkit) {
        $old-experimental-support : disable-experimental-support-for-all();
        $support-webkit: true;
        @-webkit-keyframes #{$name} {
            @content;
        }
    }

    // 如果开启 mozilla 前缀支持，则在具有 mozilla 前缀的关键帧定义中
    // 输出 mozilla 前缀内容和正常内容，取消输出其它内容
    @if get-experimental-support($original-experimental-support, mozilla) {
        $old-experimental-support : disable-experimental-support-for-all();

        $support-mozilla: true;
        @-moz-keyframes #{$name} {
            @content;
        }
    }

    // 如果开启 opera 前缀支持，则在具有 opera 前缀的关键帧定义中
    // 输出 opera 前缀内容和正常内容，取消输出其它内容
    @if get-experimental-support($original-experimental-support, opera) {
        $old-experimental-support : disable-experimental-support-for-all();
        $support-opera: true;
        @-o-keyframes #{$name} {
            @content;
        }
    }

    // 最后在无前缀的关键帧定义中输出除 webkit，mozilla 以及 opera 前缀内容之外
    // 的其它内容
    $_i : set-experimental-support-for-all($original-experimental-support);
    $support-webkit: false;
    $support-mozilla: false;
    $support-opera: false;

    @keyframes #{$name} {
        @content;
    }

    // 最后还原浏览器前缀支持配置
    $_i : set-experimental-support-for-all($original-experimental-support);
}